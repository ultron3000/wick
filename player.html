<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cloud TV â€“ Player</title>

<link rel="icon" href="https://static.readdy.ai/image/0ece273271e400e488b9947cb1e99e9a/a79b6f32c71c4ee2094ead0eb9c84c9b.png">

<style>
body{margin:0;background:#000}
iframe{width:100vw;height:100vh;border:none}
</style>
</head>
<body>

<iframe id="player" allow="autoplay; encrypted-media; fullscreen"></iframe>

<script>
const params = new URLSearchParams(location.search);
const id = params.get('id');
const iframe = document.getElementById('player');

if (!id) {
  document.body.innerHTML = 'No channel selected';
}

fetch('./channels.json')
  .then(r => r.json())
  .then(list => {
    const ch = list.find(c => c.id === id);
    if (!ch) {
      document.body.innerHTML = 'Channel not found';
      return;
    }

    const mpd = encodeURIComponent(ch.url);
    iframe.src = `s-mpd.html?url=${mpd}&keyId=${ch.keyId}&key=${ch.key}`;
  })
  .catch(() => {
    document.body.innerHTML = 'Failed to load channels';
  });
</script>

</body>
</html>
